(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{ch6i:function(e,n,t){},e6Wu:function(e,n,t){"use strict";t.r(n);t("ch6i");function i(e,n){const t=JSON.stringify(n);localStorage.setItem(e,t)}function s(e){const n=localStorage.getItem(e);return JSON.parse(n)}const c=document.querySelector("#login"),a=document.getElementById("myfile"),o=document.querySelector(".login__file");function d(e){const{value:n}=e.target;if(0!==n.length){{const e=n.replace(/^.*\\/g,"");o.innerHTML=e}if(this.files&&this.files[0]){var t=new FileReader;t.addEventListener("load",(function(){i("image",t.result)})),t.readAsDataURL(this.files[0])}}}let l;document.querySelector("#LOGIN")&&(c.addEventListener("submit",(function(e){e.preventDefault();const{username:n}=e.currentTarget.elements,t=s("image");""!==n.value&&t?(i("username",n.value),document.location.replace("/chat/dist/chat.html")):alert("Cannot log in: Choose username or image")})),a.addEventListener("change",d)),function(){if(!document.querySelector("#CHAT-PAGE"))return;s("username");const e=document.querySelector("#form-chat"),n=document.querySelector("#input"),t=document.querySelector(".textarea"),i=document.querySelector(".form-chat__button");let c=s("username"),a=s("image");e.addEventListener("submit",(async function(e){e.preventDefault();let s=n.value;if(""===s)return void n.classList.add("input-error");n.classList.remove("input-error");i.innerHTML='\n<div class="sk-circle">\n  <div class="sk-circle1 sk-child"></div>\n  <div class="sk-circle2 sk-child"></div>\n  <div class="sk-circle3 sk-child"></div>\n  <div class="sk-circle4 sk-child"></div>\n  <div class="sk-circle5 sk-child"></div>\n  <div class="sk-circle6 sk-child"></div>\n  <div class="sk-circle7 sk-child"></div>\n  <div class="sk-circle8 sk-child"></div>\n  <div class="sk-circle9 sk-child"></div>\n  <div class="sk-circle10 sk-child"></div>\n  <div class="sk-circle11 sk-child"></div>\n  <div class="sk-circle12 sk-child"></div>\n</div>\n',o.onmessage=({data:e})=>{const{message:n,cords:i,name:s,image:c,mine:a}=JSON.parse(e),o=function(e,n,t,i){const s=document.createElement("div"),c=document.createElement("div"),a=document.createElement("span"),o=document.createElement("span"),d=document.createElement("div"),l=document.createElement("img"),r=document.createElement("div");return l.src=i,a.append(e),o.append(n),d.append(t),r.append(a,o),c.append(r,d),s.classList.add("incoming"),l.classList.add("incoming__img"),r.classList.add("incoming__info"),c.classList.add("incoming__wrapper"),a.classList.add("incoming__time"),o.classList.add("incoming__name"),d.classList.add("incoming__message"),s.append(l,c),s}(function(){const e=(new Date).getHours();let n=(new Date).getMinutes();return n<10?`${e}:0${n}`:`${e}:${n}`}(),s,n,c);var d;a?o.classList.add("incoming--mine"):o.classList.add("incoming--guest"),t.prepend(o),d=i,new google.maps.Marker({position:d,map:l}),l.setZoom(10),l.setCenter(d)},async function(){const e=await new Promise(e=>{navigator.geolocation.getCurrentPosition(({coords:n})=>e(n))});return{lat:e.latitude,lng:e.longitude}}().then(e=>{o.send(JSON.stringify({cords:e,message:s,name:c,image:a,mine:!0})),i.innerHTML="Send"}),n.value=""})),window.onload=function(){l=new google.maps.Map(document.getElementById("map"),{zoom:1,center:{lat:-25.363,lng:131.044}})};let o=new WebSocket("wss://venify.herokuapp.com/chat")}()}},[["e6Wu",1]]]);